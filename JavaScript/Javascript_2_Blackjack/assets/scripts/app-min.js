(()=>{"use strict";const e=["C","D","H","S"],n=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],t=document.querySelector("#new-game-button"),r=document.querySelector("#take-card-button"),s=document.querySelector("#stop-game-button"),i=document.querySelectorAll(".card-section"),c=document.querySelectorAll("span");let a=[],d=[0,0];const o=()=>{if(52===a.length)return a;(1===a.length||a.length<52)&&(a=[]);for(const t of n)for(const n of e)a.push(t+n);a=_.shuffle(a)},l=(e=0)=>{const n=(()=>a.pop())();d[e]+=((e="")=>(e=e.substring(0,e.length-1),isNaN(e)?"A"===e?11:10:Number(e)))(n),c[e].innerText=d[e],i[e].append(((e="")=>{const n=document.createElement("img");return n.src="assets/img/"+e+".png",n.alt="Card Image "+e,n.classList.add("card"),n})(n))},u=()=>{const e=new Set;for(let n=d[0];n<=21;n++)e.add(n);return e},m=()=>{0==a.length&&o(),l(0),d[0]>=21&&(r.disabled=!0,b())},b=()=>{for(r.disabled=!0,s.disabled=!0,0===d[0]&&m();21===d[0]?d[1]<21:d[0]>21?0===d[1]:!u().has(d[1])&&d[1]<=21;)l(1);d[0]>21&&d[1]>21||d[0]===d[1]?c[0].innerHTML+=" -> Draw":d[0]<=21&&d[1]>21||21===d[0]&&d[1]<21?c[0].innerHTML+=" -> Winner":d[0]>21&&d[1]<=21||21===d[1]&&d[0]<21?c[1].innerHTML+=" -> Winner":Math.abs(21-d[0])<Math.abs(21-d[1])?c[0].innerHTML+=" -> Winner":c[1].innerHTML+=" -> Winner"};t.addEventListener("click",()=>{o(),i[0].innerHTML="",i[1].innerHTML="",c[0].innerText="0",c[1].innerText="0",r.disabled=!1,s.disabled=!1,d=[0,0]}),r.addEventListener("click",m),s.addEventListener("click",b)})();